<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.&nbsp;Exported functions</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.67.0"><link rel="start" href="index.html" title="MetaTheme - The Reference Book"><link rel="up" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Theme engines"><link rel="prev" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Theme engines"><link rel="next" href="ch06.html" title="Chapter&nbsp;6.&nbsp;Toolkit backends"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.&nbsp;Exported functions</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;5.&nbsp;Theme engines</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch06.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="engines-exported-functions"></a>1.&nbsp;Exported functions</h2></div></div></div><p>A theme engine must export these functions:</p><pre class="programlisting">void metatheme_init(MT_ENGINE *engine);
void metatheme_exit(MT_ENGINE *engine);
void metatheme_realize(MT_ENGINE *engine);
void metatheme_draw_widget(MT_ENGINE *engine, MT_WINDOW *win, MT_RECTANGLE *area, int type, int state, int x, int y, int width, int height, MT_WIDGET_DATA *data);
void metatheme_draw_string(MT_ENGINE *engine, MT_WINDOW *win, int type, int state, MT_STRING *str);</pre><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2038"></a>1.1.&nbsp;metatheme_init</h3></div></div></div><p>This function should initialize a theme. It might allocate a structure with it's private data and store the pointer to the <code class="literal">data</code> member of the MT_ENGINE structure.</p><p>This function should also set all metrics and gather colors from current palette. This function must not create any graphics contexts or pixmaps.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2048"></a>1.2.&nbsp;metatheme_exit</h3></div></div></div><p>This function must free all resources obtained by the theme engine.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2053"></a>1.3.&nbsp;metatheme_realize</h3></div></div></div><p>You should create any common graphics contexts and pixmaps in this function.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2058"></a>1.4.&nbsp;metatheme_draw_widget</h3></div></div></div><p>This function is the core bussiness of a theme engine.</p><div class="variablelist"><dl><dt><span class="term">win</span></dt><dd><p>This is a window we draw on.</p></dd><dt><span class="term">area</span></dt><dd><p>This is a (clip) rectangle which should be drawed. It might be NULL.</p><p>This rectangle is automatically used for clipping area, so you needn't to bother with it. It is provided for possibility of optimalization of drawing.</p></dd><dt><span class="term">type</span></dt><dd><p>Type of the widget or it's part (see <a href="ch02s03.html" title="3.&nbsp;Widget types">Widget types</a>).</p></dd><dt><span class="term">state</span></dt><dd><p>Current state of the widget or it's part (see <a href="ch02s05.html" title="5.&nbsp;Widget states">Widget states</a>).</p></dd><dt><span class="term">x, y, width, height</span></dt><dd><p>This is a rectangle we draw within.</p></dd><dt><span class="term">data</span></dt><dd><p>Additional informations about widget or it's part. For reference see the <code class="filename">metatheme.h</code> file and the chapter about <a href="ch02.html" title="Chapter&nbsp;2.&nbsp;Constants">Constants</a>.</p></dd></dl></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2114"></a>1.5.&nbsp;metatheme_draw_string</h3></div></div></div><p>This function is used for customizing the appearance of texts in various widgets. However, it's use is very limited. The text is given as an opaque structure by which you can do ONLY the following things:</p><div class="orderedlist"><ol type="1"><li><p>do not display it at all</p></li><li><p>display it as normal</p></li><li><p>change the color of text and/or position</p></li><li><p>repeat previous steps</p></li></ol></div><p>The list of allowed widget types and states is listed <a href="ch02s04.html" title="4.&nbsp;Supported widget types in metatheme_draw_string">here</a>.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch06.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;Theme engines&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;6.&nbsp;Toolkit backends</td></tr></table></div></body></html>